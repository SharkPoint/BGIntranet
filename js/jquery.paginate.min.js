!function($){$.paginate=function(element,options){var defaults={perPage:3,autoScroll:!0,scope:"",paginatePosition:["bottom"],containerTag:"nav",paginationTag:"ul",itemTag:"li",linkTag:"a",useHashLocation:!0,onPageClick:function(){}},plugin=this,plugin_index=$(".paginate").length;plugin.settings={};var $element=$(element),curPage,items,offset,maxPage;plugin.init=function(){plugin.settings=$.extend({},defaults,options),curPage=1,items=$element.children(plugin.settings.scope),maxPage=Math.ceil(items.length/plugin.settings.perPage);var paginationHTML=generatePagination();$.inArray("top",plugin.settings.paginatePosition)>-1&&$element.before(paginationHTML),$.inArray("bottom",plugin.settings.paginatePosition)>-1&&$element.after(paginationHTML),$element.addClass("paginate"),$element.addClass("paginate-"+plugin_index);var hash=location.hash.match(/\#paginate\-(\d)/i);hash&&plugin.settings.useHashLocation?plugin.switchPage(hash[1]):plugin.switchPage(1)},plugin.switchPage=function(page){if("next"==page&&(page=curPage+1),"prev"==page&&(page=curPage-1),page<1||page>maxPage)return!1;if(page>maxPage)return $(".paginate-pagination-"+plugin_index).find(".page-next").addClass("deactive"),!1;for($(".paginate-pagination-"+plugin_index).find(".page-next").removeClass("deactive"),$(".paginate-pagination-"+plugin_index).find(".active").removeClass("active"),$(".paginate-pagination-"+plugin_index).find(".page-"+page).addClass("active"),offset=(page-1)*plugin.settings.perPage,$(items).hide(),i=0;i<plugin.settings.perPage;i++)$(items[i+offset]).length&&$(items[i+offset]).fadeTo(100,1);return 1==page?$(".paginate-pagination-"+plugin_index).find(".page-prev").addClass("deactive"):$(".paginate-pagination-"+plugin_index).find(".page-prev").removeClass("deactive"),page==maxPage?$(".paginate-pagination-"+plugin_index).find(".page-next").addClass("deactive"):$(".paginate-pagination-"+plugin_index).find(".page-next").removeClass("deactive"),curPage=page},plugin.kill=function(){$(items).show(),$(".paginate-pagination-"+plugin_index).remove(),$element.removeClass("paginate"),$element.removeData("paginate")};var generatePagination=function(){var paginationEl="<"+plugin.settings.containerTag+' class="paginate-pagination paginate-pagination-'+plugin_index+'" data-parent="'+plugin_index+'">';for(paginationEl+="<"+plugin.settings.paginationTag+">",paginationEl+="<"+plugin.settings.itemTag+">",paginationEl+="<"+plugin.settings.linkTag+' href="#" data-page="prev" class="page page-prev">&laquo;</'+plugin.settings.linkTag+">",paginationEl+="</"+plugin.settings.itemTag+">",i=1;i<=maxPage;i++)paginationEl+="<"+plugin.settings.itemTag+">",paginationEl+="<"+plugin.settings.linkTag+' href="#paginate-'+i+'" data-page="'+i+'" class="page page-'+i+'">'+i+"</"+plugin.settings.linkTag+">",paginationEl+="</"+plugin.settings.itemTag+">";return paginationEl+="<"+plugin.settings.itemTag+">",paginationEl+="<"+plugin.settings.linkTag+' href="#" data-page="next" class="page page-next">&raquo;</'+plugin.settings.linkTag+">",paginationEl+="</"+plugin.settings.itemTag+">",paginationEl+="</"+plugin.settings.paginationTag+">",paginationEl+="</"+plugin.settings.containerTag+">",$(document).on("click",".paginate-pagination-"+plugin_index+" .page",function(e){console.log("clicked"),e.preventDefault();var page=$(this).data("page"),paginateParent=$(this).parents(".paginate-pagination").data("parent");$(".paginate-"+paginateParent).data("paginate").settings.onPageClick(),(page=$(".paginate-"+paginateParent).data("paginate").switchPage(page))&&(plugin.settings.useHashLocation&&(location.hash="#paginate-"+page),plugin.settings.autoScroll&&$("html, body").animate({scrollTop:$(".paginate-"+paginateParent).offset().top},"slow"))}),paginationEl};plugin.init()},$.fn.paginate=function(options){return this.each(function(){if(void 0===$(this).data("paginate")){var plugin=new $.paginate(this,options);$(this).data("paginate",plugin)}})}}(jQuery);